<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Virtual HealthCare — Polished</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{ --bg1:#edf2ff; --panel:rgba(255,255,255,0.82); --muted:#6b7280; --text:#0f172a; --accent:#3f51b5; --accent-2:#7c3aed; --radius:14px }
    body{min-height:100vh;background:linear-gradient(180deg,#eef4ff,#f6fbff);color:var(--text);padding:28px;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    .container{max-width:1200px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px;padding:12px;border-radius:12px}
    .brand-title{font-weight:800;font-size:1.25rem;color:var(--accent)}

    /* Upcoming appointment preview styled like references (glass) */
    .appt-large{background:var(--panel);backdrop-filter:blur(8px);border-radius:16px;padding:36px;box-shadow:0 18px 40px rgba(16,24,40,0.08);text-align:center;margin-bottom:18px;border:1px solid rgba(15,23,42,0.04)}
    .appt-large h2{margin:0;font-size:1.1rem;color:#1f2937}
    .appt-time{font-weight:900;font-size:56px;margin:12px 0;background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;color:transparent}
    .timeline-row{display:flex;align-items:center;gap:22px;justify-content:center;margin-top:18px}
    .timeline-avatar{display:flex;flex-direction:column;align-items:center;font-size:13px;color:var(--muted)}
    .timeline-avatar .avatar-circle{width:72px;height:72px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
    .appt-actions{display:flex;gap:12px;justify-content:center;margin-top:20px}
    .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;padding:12px 20px;border-radius:12px;border:none;cursor:pointer;font-weight:700}
    .btn-outline{background:transparent;border:1px solid rgba(15,23,42,0.06);padding:10px 18px;border-radius:12px;cursor:pointer}

    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    .panel{background:var(--panel);backdrop-filter:blur(6px);padding:18px;border-radius:12px;box-shadow:0 10px 30px rgba(16,24,40,0.04);border:1px solid rgba(15,23,42,0.03)}

    /* payment modal */
    .modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:var(--panel);padding:18px;border-radius:12px;box-shadow:0 20px 50px rgba(2,6,23,0.2);z-index:120;width:420px}
    .modal h3{margin:0}
    .modal .row{display:flex;gap:8px;margin-top:12px}

    footer{margin-top:18px;text-align:center;color:transparent}

    @media(max-width:980px){ .grid{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand-title">Virtual HealthCare</div>
      <div style="margin-left:auto;color:var(--muted)">Welcome, Matilda</div>
    </header>

    <!-- Appointment preview using user-provided reference images -->
    <section class="appt-large" id="apptPreview">
      <h2>Upcoming Appointments Preview</h2>
      <div class="appt-time" id="apptCountdown">--:--</div>
      <div class="timeline-row" id="timelineRow"></div>
      <div class="appt-actions">
        <button class="btn-outline" id="rescheduleBtn">Reschedule</button>
        <button class="btn-primary" id="joinNowBtn">Join Now</button>
      </div>
    </section>

    <div class="grid">
      <div>
        <div class="panel">
          <h3>Health Snapshot</h3>
          <p style="color:var(--muted)">Quick glance at recent metrics</p>
          <div id="metrics" style="display:flex;gap:12px;margin-top:12px"></div>
        </div>

        <div class="panel" style="margin-top:14px">
          <h3>Quick Actions</h3>
          <div style="display:flex;gap:12px;margin-top:12px">
            <button class="btn-outline" id="bookBtnSmall">Book a Doctor</button>
            <button class="btn-outline" id="consultBtnSmall">Start a Consult</button>
            <button class="btn-outline" id="uploadBtnSmall">Upload Report</button>
            <button class="btn-outline" id="sosBtnSmall">Emergency</button>
          </div>
        </div>
      </div>

      <aside>
        <div class="panel">
          <h3>Appointment Details</h3>
          <div id="apptDetails" style="margin-top:8px;color:var(--muted)">No appointment selected</div>
          <div style="margin-top:12px;display:flex;gap:8px">
            <button class="btn-primary" id="payBtn">Pay & Confirm</button>
            <button class="btn-outline" id="saveDraft">Save Draft</button>
          </div>
        </div>

      </aside>
    </div>

    <footer></footer>
  </div>

  <!-- Payment modal (web stub) -->
  <div id="paymentModal" style="display:none" class="modal" role="dialog" aria-modal="true">
    <h3>Pay for Consultation</h3>
    <div style="color:var(--muted);margin-top:8px">Provider: <span id="pmProvider">-</span></div>
    <div style="margin-top:12px">Amount: <strong id="pmAmount">$25.00</strong></div>
    <div class="row" style="margin-top:12px">
      <input id="cardNumber" placeholder="Card number" style="flex:1;padding:8px;border-radius:8px;border:1px solid #e6eef8" />
    </div>
    <div class="row">
      <input id="cardExp" placeholder="MM/YY" style="padding:8px;border-radius:8px;border:1px solid #e6eef8" />
      <input id="cardCvv" placeholder="CVV" style="padding:8px;border-radius:8px;border:1px solid #e6eef8" />
    </div>
    <div style="margin-top:12px;display:flex;gap:8px"><button id="confirmPay" class="btn-primary">Confirm Payment</button><button id="cancelPay" class="btn-outline">Cancel</button></div>
  </div>

<script>

// App state (local-only prototype)
const STORAGE_KEY = 'vhc_paid_v1';
let state = { appointments: [{id:'appt1', doctorName:'Dr. Maya Chen', when: new Date(Date.now()+1000*60*60).toISOString(), amount:25}], selectedAppt: null };

function load(){ const s = localStorage.getItem(STORAGE_KEY); if(s) state = JSON.parse(s); }
function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }

// build appointment preview
function renderAppointmentPreview(){ const countdownEl = document.getElementById('apptCountdown'); const timelineRow = document.getElementById('timelineRow'); const appt = state.appointments[0]; if(!appt){ countdownEl.innerText='No appointments'; timelineRow.innerHTML=''; return; }
  document.getElementById('apptDetails').innerText = `${appt.doctorName} — ${new Date(appt.when).toLocaleString()}`;
  // countdown
  function updateCountdown(){ const diff = new Date(appt.when) - new Date(); if(diff<=0){ countdownEl.innerText='Due'; } else { const mins = Math.floor(diff/60000); const hrs = Math.floor(mins/60); const m = String(mins%60).padStart(2,'0'); countdownEl.innerText = `${hrs}:${m}`; } }
  updateCountdown(); setInterval(updateCountdown,10000);
  // timeline avatar: single clean avatar for primary doctor
  timelineRow.innerHTML='';
  const initials = (appt.doctorName||'Doctor').split(' ').map(s=>s[0]).slice(0,2).join('');
  const node = document.createElement('div');
  node.className = 'timeline-avatar';
  node.innerHTML = `
    <div class="avatar-circle" style="background:linear-gradient(90deg,var(--accent),var(--accent-2));width:72px;height:72px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:20px">${initials}</div>
    <div style='margin-top:8px;font-weight:700'>${appt.doctorName}</div>
  `;
  timelineRow.appendChild(node);
  // wire actions
  document.getElementById('joinNowBtn').onclick = ()=> { state.selectedAppt = appt; openPaymentIfRequired(appt); };
  document.getElementById('rescheduleBtn').onclick = ()=> { showRescheduleModal(appt); };
}

// Payment flow: open payment modal (web stub). In real app, integrate RevenueCat or payment gateway.
function openPaymentIfRequired(appt){ // in this prototype, always require payment before join
  const modal = document.getElementById('paymentModal'); document.getElementById('pmProvider').innerText = appt.doctorName; document.getElementById('pmAmount').innerText = `$${appt.amount.toFixed(2)}`; modal.style.display = 'block';
  document.getElementById('cancelPay').onclick = ()=> modal.style.display='none';
  document.getElementById('confirmPay').onclick = ()=> simulatePayment(appt);
}
function simulatePayment(appt){ // basic validation
  const num = document.getElementById('cardNumber').value.trim(); if(num.length<12){ alert('Enter a test card number'); return; }
  // mock processing
  document.getElementById('confirmPay').innerText = 'Processing...';
  setTimeout(()=>{
    document.getElementById('confirmPay').innerText = 'Confirm Payment'; document.getElementById('paymentModal').style.display='none';
    showToast('Payment successful — joining call');
    // mark appointment paid and 'joined'
    appt.paid = true; save();
    // in real app, navigate to telehealth session
  },1200);
}

// small metrics rendering
function renderMetrics(){ const node = document.getElementById('metrics'); node.innerHTML=''; const metrics=[{label:'Sleep',val:'7.5h'},{label:'Stress',val:'Low'},{label:'Meds',val:'On track'}]; metrics.forEach(m=>{ const el=document.createElement('div'); el.style.flex='1'; el.innerHTML = `<div style='font-weight:700'>${m.val}</div><div style='color:var(--muted)'>${m.label}</div>`; node.appendChild(el); }); }

function renderQuickButtons(){ document.getElementById('bookBtnSmall').onclick = ()=> openBookingFlow(); document.getElementById('consultBtnSmall').onclick = ()=> showToast('Open consult flow'); document.getElementById('uploadBtnSmall').onclick = ()=> showToast('Open upload flow'); document.getElementById('sosBtnSmall').onclick = ()=> showToast('SOS: call emergency'); document.getElementById('payBtn').onclick = ()=> { if(state.appointments.length>0) openPaymentIfRequired(state.appointments[0]); else showToast('No appointment to pay'); } }

function openBookingFlow(){ // simplified booking UI using modal prompts
  showBookingModal(); }

function renderFileList(){ const node = document.getElementById('fileList'); if(!node) return; node.innerHTML=''; }

// helper: modal and toast
function showToast(msg, timeout=2600){ let container = document.getElementById('toastRoot'); if(!container){ container = document.createElement('div'); container.id='toastRoot'; container.style.position='fixed'; container.style.right='20px'; container.style.bottom='20px'; container.style.zIndex=9999; document.body.appendChild(container); }
  const t = document.createElement('div'); t.style.background='linear-gradient(90deg,var(--accent),var(--accent-2))'; t.style.color='white'; t.style.padding='10px 14px'; t.style.borderRadius='10px'; t.style.marginTop='8px'; t.style.boxShadow='0 8px 20px rgba(12,20,40,0.2)'; t.innerText = msg; container.appendChild(t); setTimeout(()=> t.remove(), timeout);
}

function showRescheduleModal(appt){ const root = document.getElementById('modalRoot') || document.body; const modal = document.createElement('div'); modal.className='modal'; modal.innerHTML = `<h3>Reschedule Appointment</h3><div style='margin-top:8px'>Doctor: <strong>${appt.doctorName}</strong></div><div style='margin-top:12px'><input id='reschedWhen' type='datetime-local' style='width:100%;padding:8px;border-radius:8px;border:1px solid #e6eef8' value='${new Date(appt.when).toISOString().slice(0,16)}' /></div><div style='margin-top:12px;display:flex;gap:8px'><button id='doResched' class='btn-primary'>Save</button><button id='cancelResched' class='btn-outline'>Cancel</button></div>`; (document.getElementById('modalRoot') || document.body).appendChild(modal);
  document.getElementById('cancelResched').addEventListener('click', ()=> modal.remove());
  document.getElementById('doResched').addEventListener('click', ()=>{ const when = document.getElementById('reschedWhen').value; if(!when){ showToast('Pick a valid time'); return; } appt.when = new Date(when).toISOString(); save(); renderAppointmentPreview(); modal.remove(); showToast('Rescheduled'); }); }

function showBookingModal(){ const modal = document.createElement('div'); modal.className='modal'; modal.innerHTML = `<h3>New Booking</h3><div style='margin-top:8px'><label>Name</label><input id='bkName' value='Matilda' style='width:100%;padding:8px;border-radius:6px;border:1px solid #e6eef8' /></div><div style='margin-top:8px'><label>Doctor</label><input id='bkDoc' value='Dr. Maya Chen' style='width:100%;padding:8px;border-radius:6px;border:1px solid #e6eef8' /></div><div style='margin-top:8px'><label>Date & time</label><input id='bkWhen' type='datetime-local' style='width:100%;padding:8px;border-radius:6px;border:1px solid #e6eef8' value='${new Date(Date.now()+3600000).toISOString().slice(0,16)}' /></div><div style='margin-top:12px;display:flex;gap:8px'><button id='bkSave' class='btn-primary'>Book</button><button id='bkCancel' class='btn-outline'>Cancel</button></div>`; document.body.appendChild(modal);
  document.getElementById('bkCancel').addEventListener('click', ()=> modal.remove());
  document.getElementById('bkSave').addEventListener('click', ()=>{ const name=document.getElementById('bkName').value.trim(); const doc=document.getElementById('bkDoc').value.trim(); const when=document.getElementById('bkWhen').value; if(!when || !doc){ showToast('Please complete booking fields'); return; } const appt={id:uid(),doctorName:doc,when:new Date(when).toISOString(),amount:25}; state.appointments.unshift(appt); save(); modal.remove(); renderAppointmentPreview(); showToast('Booked — please pay to confirm'); }); }

// init
load(); renderMetrics(); renderQuickButtons(); renderAppointmentPreview();
</script>
</body>
</html>
