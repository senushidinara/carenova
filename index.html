<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Virtual HealthCare — Local Prototype</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --bg1:#071028; --bg2:#0f1724;
      --card:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      --muted:#98a6b3; --text:#e6eef8; --accent:#6b7bff; --accent-2:#2fd2a4; --shadow: 0 10px 30px rgba(5,8,20,0.6);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    html,body{height:100%}
    body{min-height:100vh;background:radial-gradient(1200px 600px at 10% 10%, rgba(107,123,255,0.14), transparent), linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--text);padding:28px}

    .app{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:280px 1fr;gap:20px;align-items:start}

    header.app-header{grid-column:1/-1;display:flex;align-items:center;gap:18px;padding:18px;border-radius:14px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);box-shadow:var(--shadow)}
    .brand{display:flex;flex-direction:column}
    .brand-title{font-weight:800;font-size:1.25rem;background:linear-gradient(90deg,var(--accent-2),var(--accent));-webkit-background-clip:text;background-clip:text;color:transparent}
    .brand-sub{color:var(--muted);font-size:0.9rem}
    .header-actions{margin-left:auto;display:flex;gap:12px;align-items:center}

    .btn{background:linear-gradient(135deg,var(--accent),#7a6bff);border:none;color:white;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700;display:inline-flex;gap:10px;align-items:center;box-shadow:0 6px 18px rgba(83,92,255,0.12);transition:transform .12s ease,box-shadow .12s ease}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:10px 12px}
    .btn:hover{transform:translateY(-3px);box-shadow:0 14px 30px rgba(20,28,80,0.35)}

    .sidebar{background:var(--card);padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,0.03);height:calc(100vh - 120px);overflow:auto;box-shadow:var(--shadow)}
    .profile{display:flex;gap:12px;align-items:center}
    .avatar{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.05rem;color:#05102a;box-shadow:0 6px 18px rgba(47,210,164,0.08)}
    .user-info{line-height:1}
    .user-name{font-weight:800}
    .user-role{color:var(--muted);font-size:0.85rem}

    .nav{margin-top:18px;display:flex;flex-direction:column;gap:8px}
    .nav button{display:flex;gap:12px;align-items:center;padding:12px;border-radius:12px;background:transparent;border:none;color:var(--text);text-align:left;cursor:pointer;font-weight:700}
    .nav button.active{background:linear-gradient(90deg,rgba(107,123,255,0.12),rgba(47,210,164,0.04));border:1px solid rgba(255,255,255,0.02)}

    .muted{color:var(--muted)}

    .main-area{display:grid;grid-template-rows:auto 1fr;gap:16px}
    .tabs{display:flex;gap:10px;align-items:center}
    .tab{padding:10px 14px;border-radius:10px;background:transparent;border:1px solid transparent;color:var(--muted);cursor:pointer;font-weight:700}
    .tab.active{background:linear-gradient(90deg,rgba(107,123,255,0.12),rgba(47,210,164,0.04));color:var(--text);border-color:rgba(255,255,255,0.02)}

    .cards{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .card{background:var(--card);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}

    .doctor-list{display:flex;flex-direction:column;gap:12px;margin-top:12px}
    .doctor{display:flex;gap:12px;align-items:center;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);transition:transform .12s ease,box-shadow .12s ease}
    .doctor:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(10,12,30,0.6)}
    .doctor .meta{flex:1}

    label{font-weight:700;color:var(--muted);font-size:0.9rem}
    input,select,textarea{width:100%;padding:11px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);outline:none}
    input:focus,select:focus,textarea:focus{box-shadow:0 8px 24px rgba(83,92,255,0.06);border-color:rgba(107,123,255,0.22)}

    .appointments{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .appt{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.02)}

    .history-list{display:flex;flex-direction:column;gap:10px}
    .history-item{padding:12px;border-radius:10px;background:linear-gradient(90deg, rgba(107,123,255,0.02), rgba(47,210,164,0.01));border:1px solid rgba(255,255,255,0.02)}

    .video-stage{display:flex;gap:12px;align-items:flex-start}
    video{border-radius:12px;background:#000;max-width:100%;object-fit:cover}

    .advice{padding:12px;border-radius:10px;background:linear-gradient(90deg,rgba(91,107,255,0.08),rgba(41,194,155,0.04));border:1px solid rgba(255,255,255,0.02);color:var(--text)}

    .file-list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .file-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;background:rgba(255,255,255,0.01)}

    .mt-12{margin-top:12px}
    .mt-8{margin-top:8px}

    @media(max-width:980px){.app{grid-template-columns:1fr}.sidebar{height:auto}.cards{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="brand">
        <div class="brand-title">Virtual HealthCare</div>
        <div class="brand-sub">Book appointments • Telehealth • Personal medical history</div>
      </div>

      <div class="header-actions">
        <button id="exportHistory" class="btn"><i class="fa-solid fa-file-export"></i> Export</button>
        <button id="helpBtn" class="btn ghost"><i class="fa-solid fa-circle-question"></i> Help</button>
      </div>
    </header>

    <aside class="sidebar">
      <div class="profile">
        <div class="avatar" id="avatar">VK</div>
        <div class="user-info">
          <div class="user-name" id="displayName">Patient</div>
          <div class="user-role" id="displayRole"></div>
        </div>
      </div>

      <nav class="nav" id="nav">
        <button class="active" data-view="dashboard"><i class="fa-solid fa-grid"></i> Dashboard</button>
        <button data-view="book"><i class="fa-solid fa-calendar-plus"></i> Book</button>
        <button data-view="history"><i class="fa-solid fa-folder-medical"></i> History</button>
        <button data-view="telehealth"><i class="fa-solid fa-video"></i> Telehealth</button>
        <button data-view="support"><i class="fa-solid fa-stethoscope"></i> Support</button>
      </nav>

      <hr style="margin-top:14px;border:none;border-top:1px solid rgba(255,255,255,0.04)">

      <div style="margin-top:14px">
        <div class="muted">Available doctors</div>
        <div class="doctor-list" id="doctorList"></div>
      </div>
    </aside>

    <main class="main-area">
      <div id="contentTop"></div>
      <div id="content" style="min-height:460px"></div>
    </main>
  </div>

<script>
/* App state and persistence */
const STORAGE_KEY = 'vhc_app_v2';
const DOCTORS = [ {id:'d1',name:'Dr. Maya Chen',specialty:'General Physician',avatar:'MC'}, {id:'d2',name:'Dr. Arjun Patel',specialty:'Pediatrics',avatar:'AP'}, {id:'d3',name:'Dr. Leila Gomez',specialty:'Psychiatry',avatar:'LG'} ];
let appState = { profile:{name:'Patient', dob:'', gender:'', phone:'', email:'', address:''}, appointments:[], history:[], files:[] };
function load(){ const s = localStorage.getItem(STORAGE_KEY); if(s) { try{ appState = JSON.parse(s); }catch(e){ console.error(e); } } }
function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(appState)); }
function uid(){ return Date.now().toString(36)+'-'+Math.random().toString(36).slice(2,8); }

/* UI refs */
const doctorListDiv = document.getElementById('doctorList');
const avatarEl = document.getElementById('avatar');
const displayName = document.getElementById('displayName');
const displayRole = document.getElementById('displayRole');

function renderProfileSummary(){ const p = appState.profile; displayName.innerText = p.name || 'Patient'; avatarEl.innerText = (p.name ? p.name.split(' ').map(s=>s[0]).slice(0,2).join('') : 'VK'); displayRole.innerText = p.email || ''; }

/* Doctors */
function renderDoctors(){ doctorListDiv.innerHTML=''; DOCTORS.forEach(d=>{ const el=document.createElement('div'); el.className='doctor'; el.innerHTML = `<div class='avatar'>${d.avatar}</div><div class='meta'><div style='font-weight:800'>${d.name}</div><div class='muted'>${d.specialty}</div></div><div><button class='btn ghost' data-doctor='${d.id}'>Book</button></div>`; doctorListDiv.appendChild(el); }); doctorListDiv.querySelectorAll('button').forEach(b=>b.addEventListener('click', ()=>{ showView('book'); preselectDoctor(b.dataset.doctor); })); }

/* Navigation */
document.getElementById('nav').addEventListener('click',(ev)=>{ const b=ev.target.closest('button'); if(!b) return; document.querySelectorAll('#nav button').forEach(x=>x.classList.remove('active')); b.classList.add('active'); showView(b.dataset.view); });

/* Top tabs helper */
function renderTabs(active){ const tabs = ['dashboard','book','history','telehealth','support']; const container = document.getElementById('contentTop'); container.innerHTML = `<div class='tabs'>${tabs.map(t=>`<button class='tab ${t===active?"active":""}' data-tab='${t}'>${t.charAt(0).toUpperCase()+t.slice(1)}</button>`).join('')}</div>`; container.querySelectorAll('.tab').forEach(tb=> tb.addEventListener('click', ()=>{ document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active')); tb.classList.add('active'); showView(tb.dataset.tab); })); }

/* Views */
const content = document.getElementById('content');
function showView(v){ renderTabs(v); switch(v){ case 'dashboard': renderDashboard(); break; case 'book': renderBooking(); break; case 'history': renderHistory(); break; case 'telehealth': renderTelehealth(); break; case 'support': renderSupport(); break; default: renderDashboard(); } }

// Dashboard
function renderDashboard(){ content.innerHTML = `
  <div class='cards'>
    <div class='card'>
      <h3>Profile</h3>
      <div style='display:flex;gap:12px;align-items:center;margin-top:12px'>
        <div style='flex:1'><div class='muted'>Name</div><div style='font-weight:800;margin-top:6px'>${appState.profile.name || '-'}</div></div>
        <div style='flex:1'><div class='muted'>Contact</div><div style='font-weight:800;margin-top:6px'>${appState.profile.phone || appState.profile.email || '-'}</div></div>
      </div>
      <div class='mt-12'><button id='editProfile' class='btn ghost'>Edit Profile</button></div>
    </div>
    <div class='card'>
      <h3>Quick Actions</h3>
      <div style='display:flex;flex-direction:column;gap:10px;margin-top:12px'>
        <button id='quickBook' class='btn'>Book Appointment</button>
        <button id='quickNote' class='btn ghost'>Add Medical Note</button>
        <button id='quickUpload' class='btn'>Upload Document</button>
      </div>
    </div>
  </div>
  <div class='card mt-12'>
    <h3>Upcoming Appointments</h3>
    <div id='upcomingList' class='appointments mt-8'></div>
  </div>
  <div class='card mt-12'>
    <h3>Files & Documents</h3>
    <div id='fileSection' class='mt-8'>
      <input type='file' id='fileInput' />
      <div class='file-list' id='fileList'></div>
    </div>
  </div>
`;
  document.getElementById('editProfile').addEventListener('click', ()=> showView('history'));
  document.getElementById('quickBook').addEventListener('click', ()=> showView('book'));
  document.getElementById('quickNote').addEventListener('click', ()=> showView('history'));
  document.getElementById('quickUpload').addEventListener('click', ()=> document.getElementById('fileInput').click());
  document.getElementById('fileInput').addEventListener('change', handleFileUpload);
  renderUpcoming(); renderFileList(); }

function renderUpcoming(){ const node=document.getElementById('upcomingList'); node.innerHTML=''; const next = appState.appointments.slice().sort((a,b)=>new Date(a.when)-new Date(b.when)).slice(0,5); if(next.length===0) node.innerHTML='<div class="muted">No upcoming appointments</div>'; next.forEach(a=>{ const el=document.createElement('div'); el.className='appt'; el.innerHTML = `<div><div style='font-weight:800'>${a.doctorName}</div><div class='muted'>${new Date(a.when).toLocaleString()}</div></div><div><button class='btn ghost' data-id='${a.id}'>Cancel</button></div>`; node.appendChild(el); }); node.querySelectorAll('button').forEach(b=> b.addEventListener('click', ()=> { cancelAppointment(b.dataset.id); })); }

// Booking
let preselectedDoctor = null; function preselectDoctor(id){ preselectedDoctor = id; }
function renderBooking(){ content.innerHTML = `
  <div class='card'>
    <h3>Book a Visit</h3>
    <div class='mt-8'><label>Patient</label><input id='patName' value='${appState.profile.name.replace(/'/g,"\'")}'></div>
    <div class='mt-8'><label>Select doctor</label><select id='doctorSelect'></select></div>
    <div class='mt-8'><label>Date & time</label><input id='when' type='datetime-local'></div>
    <div class='mt-8'><label>Reason</label><input id='reason'></div>
    <div class='mt-12' style='display:flex;gap:8px'><button id='bookBtn' class='btn'>Book</button><button id='back' class='btn ghost'>Back</button></div>
  </div>
`;
  const sel = document.getElementById('doctorSelect'); DOCTORS.forEach(d=>{ const opt=document.createElement('option'); opt.value=d.id; opt.textContent=`${d.name} — ${d.specialty}`; sel.appendChild(opt); }); if(preselectedDoctor) sel.value = preselectedDoctor;
  document.getElementById('back').addEventListener('click', ()=> showView('dashboard'));
  document.getElementById('bookBtn').addEventListener('click', ()=>{ const did=sel.value; const when=document.getElementById('when').value; const reason=document.getElementById('reason').value.trim(); if(!when||!reason){ alert('Please choose date/time and reason'); return; } const doc=DOCTORS.find(x=>x.id===did); appState.appointments.push({id:uid(),doctorId:did,doctorName:doc.name,when,reason}); save(); alert('Booked'); showView('dashboard'); }); }

// History / Profile editor
function renderHistory(){ content.innerHTML = `
  <div class='card'>
    <h3>Profile & Medical Notes</h3>
    <div class='mt-8'><label>Full name</label><input id='p_name' value='${appState.profile.name.replace(/'/g,"\'")}'></div>
    <div class='mt-8' style='display:flex;gap:8px'><div style='flex:1'><label>DOB</label><input id='p_dob' type='date' value='${appState.profile.dob}'></div><div style='flex:1'><label>Gender</label><select id='p_gender'><option value=''>-</option><option value='female'>Female</option><option value='male'>Male</option><option value='other'>Other</option></select></div></div>
    <div class='mt-8'><label>Phone</label><input id='p_phone' value='${appState.profile.phone}'></div>
    <div class='mt-8'><label>Email</label><input id='p_email' value='${appState.profile.email}'></div>
    <div class='mt-8'><label>Address</label><input id='p_address' value='${appState.profile.address}'></div>
    <div class='mt-12' style='display:flex;gap:8px'><button id='saveProfile' class='btn'>Save Profile</button><button id='addNote' class='btn ghost'>Add Medical Note</button></div>
  </div>
  <div class='card mt-12'><h3>Add Medical Note</h3>
    <div class='mt-8'><label>Date</label><input id='noteDate' type='date' value='${new Date().toISOString().slice(0,10)}'></div>
    <div class='mt-8'><label>Note</label><textarea id='noteText' rows='3'></textarea></div>
    <div class='mt-12'><button id='saveNote' class='btn'>Save Note</button></div>
  </div>
  <div class='card mt-12'><h3>Medical History</h3><div id='historyList' class='history-list mt-8'></div></div>
`;
  // set gender select value
  const gsel = document.getElementById('p_gender'); if(gsel) gsel.value = appState.profile.gender || '';
  document.getElementById('saveProfile').addEventListener('click', ()=>{ appState.profile.name=document.getElementById('p_name').value.trim()||'Patient'; appState.profile.dob=document.getElementById('p_dob').value; appState.profile.gender=document.getElementById('p_gender').value; appState.profile.phone=document.getElementById('p_phone').value; appState.profile.email=document.getElementById('p_email').value; appState.profile.address=document.getElementById('p_address').value; save(); renderProfileSummary(); alert('Profile saved'); });
  document.getElementById('saveNote').addEventListener('click', ()=>{ const d=document.getElementById('noteDate').value||new Date().toISOString().slice(0,10); const t=document.getElementById('noteText').value.trim(); if(!t){ alert('Add note text'); return; } appState.history.push({id:uid(),date:d,notes:t}); save(); renderHistory(); });
  renderHistoryList(); }
function renderHistoryList(){ const node=document.getElementById('historyList'); node.innerHTML=''; if(appState.history.length===0) node.innerHTML='<div class="muted">No history entries</div>'; appState.history.slice().reverse().forEach(h=>{ const el=document.createElement('div'); el.className='history-item'; el.innerHTML = `<div style='font-weight:800'>${h.date}</div><div class='muted' style='margin-top:8px'>${h.notes}</div><div style='margin-top:10px'><button class='btn ghost' data-id='${h.id}'>Delete</button></div>`; node.appendChild(el); }); node.querySelectorAll('button[data-id]').forEach(b=> b.addEventListener('click', ()=>{ if(!confirm('Delete entry?')) return; appState.history=appState.history.filter(x=>x.id!==b.dataset.id); save(); renderHistory(); })); }

// Telehealth
let localStream=null; function renderTelehealth(){ content.innerHTML = `
  <div class='card'>
    <h3>Telehealth (Preview)</h3>
    <div class='mt-8'><label>Select doctor</label><select id='callDoc'></select></div>
    <div class='mt-12' style='display:flex;gap:8px'><button id='startCall' class='btn'>Start Call</button><button id='endCall' class='btn ghost'>End Call</button></div>
    <div class='video-stage mt-12'><video id='remote' autoplay playsinline muted style='width:65%;height:360px;background:#111;border:1px solid rgba(255,255,255,0.03)'></video><video id='local' autoplay playsinline muted style='width:32%;height:180px;border:1px solid rgba(255,255,255,0.03)'></video></div>
  </div>
`; const sel=document.getElementById('callDoc'); DOCTORS.forEach(d=>{ const opt=document.createElement('option'); opt.value=d.id; opt.textContent=`${d.name} — ${d.specialty}`; sel.appendChild(opt); }); document.getElementById('startCall').addEventListener('click', async ()=>{ try{ const v=document.getElementById('local'); localStream = await navigator.mediaDevices.getUserMedia({video:{width:640,height:480},audio:true}); v.srcObject = localStream; document.getElementById('remote').srcObject = localStream; }catch(e){ alert('Camera failed: '+e.message); } }); document.getElementById('endCall').addEventListener('click', ()=>{ if(localStream){ localStream.getTracks().forEach(t=>t.stop()); localStream=null; document.getElementById('local').srcObject=null; document.getElementById('remote').srcObject=null; } }); }

// Support
function renderSupport(){ content.innerHTML = `
  <div class='card'>
    <h3>Symptom Support</h3>
    <div class='mt-8'><label>Describe symptoms</label><textarea id='symptoms' rows='3'></textarea></div>
    <div class='mt-12' style='display:flex;gap:8px'><button id='getAdvice' class='btn'>Get Advice</button><button id='reqDoc' class='btn ghost'>Request Doctor</button></div>
    <div id='advice' class='mt-12'></div>
  </div>
`; document.getElementById('getAdvice').addEventListener('click', ()=>{ const txt=document.getElementById('symptoms').value.toLowerCase(); if(!txt) return alert('Please describe symptoms'); document.getElementById('advice').innerHTML=`<div class='advice'>${computeAdvice(txt)}</div>`; }); document.getElementById('reqDoc').addEventListener('click', ()=> alert('Doctor request recorded (simulated). Please book an appointment for a consult.')); }
function computeAdvice(text){ if(/fever|chills|temperature/.test(text) && /cough|breath|sore throat/.test(text)) return 'Monitor closely; rest, fluids. If breathing issues or high fever, seek urgent care.'; if(/headache|migraine/.test(text)) return 'Rest, hydration, consider OTC analgesics. Seek care if severe or sudden.'; if(/nausea|diarrhea|vomit/.test(text)) return 'Hydrate and rest; if dehydrated or bloody stool seek care.'; if(/anxiety|sad|depress/.test(text)) return 'Try breathing exercises; seek mental health support if persistent.'; return 'For mild symptoms: rest, hydrate, monitor. Book appointment if unsure.'; }

// Files
function handleFileUpload(ev){ const f = ev.target.files[0]; if(!f) return; const id=uid(); const url = URL.createObjectURL(f); appState.files.push({id,name:f.name,size:f.size,date: new Date().toISOString(),url}); save(); renderFileList(); alert('File added'); }
function renderFileList(){ const node=document.getElementById('fileList'); if(!node) return; node.innerHTML=''; if(appState.files.length===0) node.innerHTML='<div class="muted">No documents uploaded</div>'; appState.files.slice().reverse().forEach(fi=>{ const el=document.createElement('div'); el.className='file-item'; el.innerHTML=`<div>${fi.name} <div class='muted' style='font-size:0.85rem'>${new Date(fi.date).toLocaleString()}</div></div><div style='display:flex;gap:8px'><a class='btn ghost' href='${fi.url}' download='${fi.name}'>Download</a><button class='btn' data-id='${fi.id}'>Delete</button></div>`; node.appendChild(el); }); node.querySelectorAll('button[data-id]').forEach(b=> b.addEventListener('click', ()=>{ if(!confirm('Delete file?')) return; appState.files=appState.files.filter(x=>x.id!==b.dataset.id); save(); renderFileList(); })); }

// App actions
function cancelAppointment(id){ if(!confirm('Cancel appointment?')) return; appState.appointments = appState.appointments.filter(a=>a.id!==id); save(); showView('dashboard'); }

// Header actions
document.getElementById('exportHistory').addEventListener('click', ()=>{ const blob=new Blob([JSON.stringify(appState,null,2)],{type:'application/json'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='vhc_export.json'; a.click(); });
document.getElementById('helpBtn').addEventListener('click', ()=> alert('This is a local demo. Data is stored in your browser only.'));

// Init
load(); renderProfileSummary(); renderDoctors(); showView('dashboard'); renderFileList();

// Expose for debug
window.vhc={appState,save,load};
</script>
</body>
</html>
